(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var i=function(){return r((function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,t),this.length=n,this.hits=r,this.sunk=o}),[{key:"hit",value:function(){return this.hits++,this.isSunk(),this.hits&&this.sunk}},{key:"isSunk",value:function(){return this.hits===this.length?(this.sunk=!0,this.sunk):this.sunk}}])}(),a=function(){return r((function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];e(this,t),this.name=n,this.missedAttacks=r,this.attemptedByOpponent=o,this.numberOfShips=i,this.ships=a,this.board=this.buildBoard()}),[{key:"placeShip",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===n){for(var r=t[1],o=0;o<e;o++){if(!1===this.isOnBoard([t[0],r]))return"Can't Reach [".concat(t[0],", ").concat(r,"]: not on board");r++}r=t[1];for(var a=0;a<e;a++){if(!1===this.isEmpty([t[0],r]))return"A Ship Is Already At [".concat(t[0],", ").concat(r,"]");r++}r=t[1];var s=new i(e);this.ships.push(s);for(var u=0;u<e;u++)this.board[t[0]][r]=s,r++}if(!1===n){for(var c=t[0],h=0;h<e;h++){if(!1===this.isOnBoard([c,t[1]]))return"Can't Reach [".concat(c,", ").concat(t[1],"]: not on board");c++}c=t[0];for(var l=0;l<e;l++){if(!1===this.isEmpty([c,t[1]]))return"A Ship Is Already At [".concat(c,", ").concat(t[1],"]");c++}c=t[0];var d=new i(e);this.ships.push(d);for(var f=0;f<e;f++)this.board[c][t[1]]=d,c++}return this.board}},{key:"receiveAttack",value:function(t,e){if(!0===this.attemptedByOpponent.includes("[".concat(t,", ").concat(e,"]")))return"Already Tried This Coordinate";if(this.attemptedByOpponent.push("[".concat(t,", ").concat(e,"]")),!0===this.isEmpty([t,e]))return this.missedAttacks.push([t,e]),"missed";var n=this.board[t][e];return n.hit(),!0===n.sunk?(this.numberOfShips--,"sunk"):n}},{key:"isEmpty",value:function(t){return null===this.board[t[0]][t[1]]}},{key:"isOnBoard",value:function(t){return!(t[0]<0||t[0]>10||t[1]<0||t[1]>10)}},{key:"areAllShipsSunk",value:function(){return this.numberOfShips<=0}},{key:"buildBoard",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"resetBoard",value:function(){for(;this.missedAttacks.length>0;)this.missedAttacks.pop();for(;this.attemptedByOpponent.length>0;)this.attemptedByOpponent.pop();for(this.numberOfShips=2;this.ships.length>0;)this.ships.pop();return this.board=this.buildBoard(),this}}])}(),s=function(){return r((function t(n){e(this,t),this.name=n,this.attemptedMap=this.buildAttemptedMap()}),[{key:"takeShotCPU",value:function(){var t=this.filter(this.attemptedMap),e=t[Math.floor(Math.random()*t.length)];return this.attemptedMap[e[0]][e[1]]="x",e}},{key:"takeShotHuman",value:function(t,e){return[t,e]}},{key:"buildAttemptedMap",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"filter",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t.length;r++)null===t[n][r]&&e.push([n,r]);return e}},{key:"resetPlayer",value:function(){this.attemptedMap=this.buildAttemptedMap()}}])}();var u,c,h;u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s("Me"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s("CPU"),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a("My Board"),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a("CPU Board");function o(){n.placeShip([0,1],3),n.placeShip([2,5],5,!1),n.placeShip([5,0],4),n.placeShip([8,8],2),r.placeShip([3,1],1),r.placeShip([5,5],1)}o();var i=t;function u(){i=i===t?e:t}var c=function(){return i},h=function(){return t},l=function(){return e},d=r;function f(){d=d===r?n:r}var p=function(){return d},v=function(){return n},y=function(){return r};function m(){console.log("resetting game"),h().resetPlayer(),l().resetPlayer(),v().resetBoard(),y().resetBoard()}return{printNewGame:m,playRound:function(i,a){if(c()===t&&r.receiveAttack(i,a),c()===e){var s=e.takeShotCPU();n.receiveAttack(s[0],s[1])}if(1==!!p().areAllShipsSunk())return console.log("".concat(c().name," has won!")),console.log(p().ships),m(),o(),"Game has ended";u(),f()},switchPlayer:u,getActivePlayer:c,getPlayer1:h,getPlayer2:l,switchBoardUnderAttack:f,getBoardUnderAttack:p,getBoard1:v,getBoard2:y}}(),c=document.querySelector(".player-board"),h=document.querySelector(".cpu-board"),u.getBoard1().board.forEach((function(t,e){t.forEach((function(t,n){var r=document.createElement("button");r.classList.add("cell-button"),r.dataset.row=e,r.dataset.column=n;var o=e.toString()+n.toString();r.dataset.rowcol=o,c.appendChild(r)}))})),u.getBoard2().board.forEach((function(t,e){t.forEach((function(t,n){var r=document.createElement("button");r.classList.add("cell-button"),r.dataset.row=e,r.dataset.column=n;var o=e.toString()+n.toString();r.dataset.rowcol=o,h.appendChild(r)}))})),console.log(function(){for(var t=u.getBoard1().board,e=[],n=0;n<t.length;n++)for(var r=0;r<t.length;r++)null!==t[n][r]&&e.push([n,r]);e.forEach((function(t){document.querySelector("[data-rowcol='".concat(t[0]).concat(t[1],"']")).classList.add("ship")}))}())})();