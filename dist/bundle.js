(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var o=function(){return r((function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,t),this.length=n,this.hits=r,this.sunk=i}),[{key:"hit",value:function(){return this.hits++,this.isSunk(),this.hits&&this.sunk}},{key:"isSunk",value:function(){return this.hits===this.length?(this.sunk=!0,this.sunk):this.sunk}}])}(),a=function(){return r((function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];e(this,t),this.name=n,this.missedAttacks=r,this.attemptedByOpponent=i,this.numberOfShips=o,this.ships=a,this.board=this.buildBoard()}),[{key:"placeShip",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===n){for(var r=t[1],i=0;i<e;i++){if(!1===this.isOnBoard([t[0],r]))return"Can't Reach [".concat(t[0],", ").concat(r,"]: not on board");r++}r=t[1];for(var a=0;a<e;a++){if(!1===this.isEmpty([t[0],r]))return"A Ship Is Already At [".concat(t[0],", ").concat(r,"]");r++}r=t[1];var u=new o(e);this.ships.push(u);for(var s=0;s<e;s++)this.board[t[0]][r]=u,r++}if(!1===n){for(var h=t[0],c=0;c<e;c++){if(!1===this.isOnBoard([h,t[1]]))return"Can't Reach [".concat(h,", ").concat(t[1],"]: not on board");h++}h=t[0];for(var l=0;l<e;l++){if(!1===this.isEmpty([h,t[1]]))return"A Ship Is Already At [".concat(h,", ").concat(t[1],"]");h++}h=t[0];var f=new o(e);this.ships.push(f);for(var p=0;p<e;p++)this.board[h][t[1]]=f,h++}return this.board}},{key:"receiveAttack",value:function(t,e){if(!0===this.attemptedByOpponent.includes("[".concat(t,", ").concat(e,"]")))return"Already Tried This Coordinate";if(this.attemptedByOpponent.push("[".concat(t,", ").concat(e,"]")),!0===this.isEmpty([t,e]))return this.missedAttacks.push([t,e]),"missed";var n=this.board[t][e];return n.hit(),!0===n.sunk?(this.numberOfShips--,"sunk"):n}},{key:"isEmpty",value:function(t){return null===this.board[t[0]][t[1]]}},{key:"isOnBoard",value:function(t){return!(t[0]<0||t[0]>10||t[1]<0||t[1]>10)}},{key:"areAllShipsSunk",value:function(){return this.numberOfShips<=0}},{key:"buildBoard",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"resetBoard",value:function(){for(;this.missedAttacks.length>0;)this.missedAttacks.pop();for(;this.attemptedByOpponent.length>0;)this.attemptedByOpponent.pop();for(this.numberOfShips=2;this.ships.length>0;)this.ships.pop();return this.board=this.buildBoard(),this}}])}(),u=function(){return r((function t(n){e(this,t),this.name=n,this.attemptedMap=this.buildAttemptedMap()}),[{key:"takeShotCPU",value:function(){var t=this.filter(this.attemptedMap),e=t[Math.floor(Math.random()*t.length)];return this.attemptedMap[e[0]][e[1]]="x",e}},{key:"takeShotHuman",value:function(t,e){return[t,e]}},{key:"buildAttemptedMap",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"filter",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t.length;r++)null===t[n][r]&&e.push([n,r]);return e}},{key:"resetPlayer",value:function(){this.attemptedMap=this.buildAttemptedMap()}}])}();var s,h,c;s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u("Me"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new u("CPU"),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a("My Board"),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a("CPU Board");function i(){n.placeShip([1,1],1),n.placeShip([0,5],1),r.placeShip([1,1],1),r.placeShip([0,5],1)}i();var o=t;function s(){o=o===t?e:t}var h=function(){return o},c=function(){return t},l=function(){return e},f=r;function p(){f=f===r?n:r}var d=function(){return f},v=function(){return n},y=function(){return r};function m(){console.log("resetting game"),c().resetPlayer(),l().resetPlayer(),v().resetBoard(),y().resetBoard()}return{printNewGame:m,playRound:function(o,a){if(h()===t&&r.receiveAttack(o,a),h()===e){var u=e.takeShotCPU();n.receiveAttack(u[0],u[1])}if(1==!!d().areAllShipsSunk())return console.log("".concat(h().name," has won!")),console.log(d().ships),m(),i(),"Game has ended";s(),p()},switchPlayer:s,getActivePlayer:h,getPlayer1:c,getPlayer2:l,switchBoardUnderAttack:p,getBoardUnderAttack:d,getBoard1:v,getBoard2:y}}(),h=document.querySelector(".player-board"),c=document.querySelector(".cpu-board"),s.getBoard1().board.forEach((function(t,e){t.forEach((function(t,e){var n=document.createElement("button");n.classList.add("cell-button"),h.appendChild(n)}))})),s.getBoard2().board.forEach((function(t,e){t.forEach((function(t,e){var n=document.createElement("button");n.classList.add("cell-button"),c.appendChild(n)}))}))})();