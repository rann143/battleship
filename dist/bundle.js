(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function o(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var i=function(){return o((function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(this,t),this.length=n,this.hits=o,this.sunk=r}),[{key:"hit",value:function(){return this.hits++,this.isSunk(),this.hits&&this.sunk}},{key:"isSunk",value:function(){return this.hits===this.length?(this.sunk=!0,this.sunk):this.sunk}}])}(),a=function(){return o((function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];e(this,t),this.name=n,this.missedAttacks=o,this.attemptedByOpponent=r,this.numberOfShips=i,this.ships=a,this.board=this.buildBoard()}),[{key:"placeShip",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===n){for(var o=t[1],r=0;r<e;r++){if(!1===this.isOnBoard([t[0],o]))return"Can't Reach [".concat(t[0],", ").concat(o,"]: not on board");o++}o=t[1];for(var a=0;a<e;a++){if(!1===this.isEmpty([t[0],o]))return"A Ship Is Already At [".concat(t[0],", ").concat(o,"]");o++}o=t[1];var s=new i(e);this.ships.push(s);for(var l=0;l<e;l++)this.board[t[0]][o]=s,o++}if(!1===n){for(var c=t[0],u=0;u<e;u++){if(!1===this.isOnBoard([c,t[1]]))return"Can't Reach [".concat(c,", ").concat(t[1],"]: not on board");c++}c=t[0];for(var h=0;h<e;h++){if(!1===this.isEmpty([c,t[1]]))return"A Ship Is Already At [".concat(c,", ").concat(t[1],"]");c++}c=t[0];var d=new i(e);this.ships.push(d);for(var p=0;p<e;p++)this.board[c][t[1]]=d,c++}return this.board}},{key:"receiveAttack",value:function(t,e){if(!0===this.attemptedByOpponent.includes("[".concat(t,", ").concat(e,"]")))return"Already Tried This Coordinate";if(this.attemptedByOpponent.push("[".concat(t,", ").concat(e,"]")),!0===this.isEmpty([t,e]))return this.missedAttacks.push([t,e]),"missed";var n=this.board[t][e];return n.hit(),!0===n.sunk?(this.numberOfShips--,"sunk"):n}},{key:"isEmpty",value:function(t){return null===this.board[t[0]][t[1]]}},{key:"isOnBoard",value:function(t){return!(t[0]<0||t[0]>10||t[1]<0||t[1]>10)}},{key:"areAllShipsSunk",value:function(){return this.numberOfShips<=0}},{key:"buildBoard",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"resetBoard",value:function(){for(;this.missedAttacks.length>0;)this.missedAttacks.pop();for(;this.attemptedByOpponent.length>0;)this.attemptedByOpponent.pop();for(this.numberOfShips=2;this.ships.length>0;)this.ships.pop();return this.board=this.buildBoard(),this}}])}(),s=function(){return o((function t(n){e(this,t),this.name=n,this.attemptedMap=this.buildAttemptedMap()}),[{key:"takeShotCPU",value:function(){var t=this.filter(this.attemptedMap),e=t[Math.floor(Math.random()*t.length)];return this.attemptedMap[e[0]][e[1]]="x",e}},{key:"takeShotHuman",value:function(t,e){return[t,e]}},{key:"buildAttemptedMap",value:function(){for(var t=[],e=0;e<10;e++){t[e]=[];for(var n=0;n<10;n++)t[e].push(null)}return t}},{key:"filter",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var o=0;o<t.length;o++)null===t[n][o]&&e.push([n,o]);return e}},{key:"resetPlayer",value:function(){this.attemptedMap=this.buildAttemptedMap()}}])}();var l=document.createElement("h1");l.textContent="Hello There!",l.classList.add("blur-back"),document.body.appendChild(l);var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s("Me"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s("CPU"),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a("My Board"),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new a("CPU Board");function r(){n.placeShip([1,1],1),n.placeShip([0,5],1),o.placeShip([1,1],1),o.placeShip([0,5],1)}r();var i=t;function l(){i=i===t?e:t}var c=function(){return i},u=function(){return t},h=function(){return e},d=o;function p(){d=d===o?n:o}var f=function(){return d},g=function(){return n},v=function(){return o};function y(){console.log("resetting game"),u().resetPlayer(),h().resetPlayer(),g().resetBoard(),v().resetBoard()}return{printNewGame:y,playRound:function(i,a){if(c()===t&&o.receiveAttack(i,a),c()===e){var s=e.takeShotCPU();n.receiveAttack(s[0],s[1])}if(1==!!f().areAllShipsSunk())return console.log("".concat(c().name," has won!")),console.log(f().ships),y(),r(),"Game has ended";l(),p()},switchPlayer:l,getActivePlayer:c,getPlayer1:u,getPlayer2:h,switchBoardUnderAttack:p,getBoardUnderAttack:f,getBoard1:g,getBoard2:v}}();console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log(c.playRound(1,1)),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log(c.playRound()),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log(c.playRound(0,5)),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log("New Game"),console.log(c.getPlayer1()),console.log(c.getPlayer2()),console.log(c.getBoard1()),console.log(c.getBoard2()),console.log("New Game"),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log(c.playRound(1,1)),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack()),console.log(c.playRound()),console.log(c.getActivePlayer()),console.log(c.getBoardUnderAttack())})();